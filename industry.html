<!DOCTYPE html>
<html>
<head>
    <title>Industry Selection</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const username = localStorage.getItem("username") || "User";
            const passionOption = localStorage.getItem("selectedPassion");

            // Function to fetch and parse the industry options from the markdown file
            async function fetchIndustryOptions() {
                const response = await fetch('https://raw.githubusercontent.com/mrapatiteobs/ai-career-website/main/expanded-passion-industry-table.md');
                const text = await response.text();
                const industryOptions = parseIndustryOptions(text);
                return industryOptions;
            }

            // Function to parse the industry options from the markdown content
            function parseIndustryOptions(text) {
                const lines = text.split('\n');
                const options = {};
                lines.forEach(line => {
                    if (line.startsWith('|')) {
                        const [passion, industries] = line.split('|').map(item => item.trim());
                        if (passion && industries) {
                            options[passion] = industries.split(',').map(item => item.trim());
                        }
                    }
                });
                return options;
            }

            // Function to display the industry options based on the selected passion
            function displayIndustryOptions(industryOptions) {
                if (passionOption && industryOptions[passionOption]) {
                    const industryContainer = document.getElementById('industry-options');
                    industryOptions[passionOption].forEach(industry => {
                        const industryDiv = document.createElement('div');
                        industryDiv.className = 'industry-option';
                        industryDiv.innerText = industry;
                        industryDiv.addEventListener('click', function () {
                            localStorage.setItem("selectedIndustry", industry);
                            // Highlight the selected option
                            document.querySelectorAll('.industry-option').forEach(el => el.classList.remove('selected'));
                            industryDiv.classList.add('selected');
                        });
                        industryContainer.appendChild(industryDiv);
                    });
                }
            }

            // Fetch and display industry options
            fetchIndustryOptions().then(industryOptions => {
                displayIndustryOptions(industryOptions);
            });

            document.getElementById('welcome-message').innerText = `Hi ${username}, select your preferred industry in ${passionOption}`;
        });

        function moveToNextPart() {
            if (localStorage.getItem("selectedIndustry")) {
                window.location.href = "next.html"; // Replace with the actual next part URL
            } else {
                alert("Please select an industry before proceeding.");
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <h1 id="welcome-message"></h1>
        <div id="industry-options" class="bubbles"></div>
        <button id="next-button" onclick="moveToNextPart()">Got it! Let's move to the next part!</button>
    </div>
</body>
</html>
